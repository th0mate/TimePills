{% extends 'base.html.twig' %}

{% block page_title %}
    TimePills | M√©dicaments
{% endblock %}

{% block cssSupplementaire %}
    <link rel="stylesheet" type="text/css" href="{{ asset('css/medicaments.css') }}">{% endblock %}
{% block jsSupplementaire %}
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js'></script>
    <script defer type="text/javascript" src="{{ asset('js/calendrier.js') }}"></script>
{% endblock %}

{% block page_content %}
    <h1 class="onglet1">Mes m√©dicaments</h1>

    <div class="wrapTop">
        <img class="illu" src="{{ asset('img/medicaments.png') }}" alt="">

        <div>
            <h2 class="redText">G√©rez vos m√©dicaments üíä</h2>
            <h2>Ajoutez et g√©rez vos <span class="redText">m√©dicaments</span> pour ne plus oublier de les prendre !
            </h2>
            <h4 class="light">Profitez du <span class="redText">calendrier</span> pour organiser vos prises de
                traitements.</h4>
        </div>
    </div>

    <div class="wrapMedocs">
    <div id="calendar"></div>

    <div class="medicaments">
        <h2 class="redText">Mes m√©dicaments</h2>

        <a href="{{ path('creerPilule') }}" class="medicament">
            <img src="{{ asset('img/ajouterMedicament.png') }}" alt="">
            <div style="padding-right: 10px; padding-left: 10px">
                <h3 class="redText">Ajouter un m√©dicament</h3>
                <h4 class="light">Ajoutez un m√©dicament √† votre liste pour recevoir des rappels de prise.</h4>
            </div>
        </a>

        {% for medicament in medicaments %}

            <div class="medicament">
                <img src="{{ asset('img/medicament.png') }}" alt="">
                <div>
                    <h3 class="redText">{{ medicament.libelle }}</h3>
                    <br>
                    <h4 class="light">Prochaine prise √† <span
                                class="redText">{{ medicament.heureDePrise | date('H:i') }}</span>.</h4>
                    {% if medicament.nbJoursPause != '' %}
                        {# on calcule la date √† laquelle sera la prochaine pause en nombre de jours #}
                        <h4 class="light">Prochaine pause le <span
                                    class="redText">{{ medicament.getDateProchainePause }}</span>.</h4>
                    {% endif %}


                    {% if medicament.datesPrises[0] is defined %}
                        {% if medicament.datesPrises[0] | date('d/m/Y') == 'now'|date_modify('-1 day')|date('d/m/Y') %}
                            <h4 class="light">Derni√®re prise <span class="redText">hier</span> √† <span
                                        class="redText">{{ medicament.datesPrises[0] | date('H:i') }}</span>.</h4>
                        {% else %}
                            <h4 class="light">Derni√®re prise le <span
                                        class="redText">{{ medicament.datesPrises[0] | date('d/m/Y') }}</span>.</h4>
                        {% endif %}
                    {% endif %}
                </div>
                <div>
                    <a href="" class="bouton">Pris</a>
                </div>
            </div>

        {% endfor %}

    </div>

{% endblock %}